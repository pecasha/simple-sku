!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Sku=e()}(this,(function(){"use strict";function t(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)}function e(t,e,i,s,f){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!f:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?f.call(t,i):f?f.value=i:e.set(t,i),i}function i(t,e){const i=new Set(e);return t.filter((t=>!i.has(t)))}var s,f,h,n,o,r,l,a,c,u,p,m,d,w;"function"==typeof SuppressedError&&SuppressedError;return f=new WeakMap,h=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap,l=new WeakMap,s=new WeakSet,a=function(){const i=Object.keys(t(this,h,"f")).map(Number);if(!t(this,f,"f"))for(let s of i){if(t(this,f,"f"))break;e(this,f,t(this,h,"f")[s].split("_").length,"f")}for(let e=0;e<t(this,f,"f");e++)t(this,n,"f")[e]=null,t(this,o,"f")[e]=[];for(let e of i)t(this,h,"f")[e].split("_").map(Number).forEach(((e,i)=>{!t(this,o,"f")[i].includes(e)&&e>-1&&t(this,o,"f")[i].push(e)}));this.options.callback?.(Array(t(this,f,"f")).fill([]),null)},c=function(){for(let e=0;e<t(this,f,"f");e++)t(this,l,"f")[e]=[]},u=function(){for(let e=0;e<t(this,f,"f");e++)t(this,r,"f")[e]=[]},p=function(){let e=0;t(this,n,"f").forEach(((i,s)=>{null===i&&t(this,o,"f")[s].length||e++})),t(this,s,"m",d).call(this,e);let i=null;if(e===t(this,f,"f")){const e=t(this,s,"m",m).call(this,t(this,n,"f"));for(let s of Object.keys(t(this,h,"f")).map(Number))e.test(t(this,h,"f")[s])&&(i=s)}this.options.callback?.(t(this,r,"f"),i)},m=function(e){const i=[];for(let s=0;s<t(this,f,"f");s++){let t="[0-9]+";s in e&&(t=e[s]?.toString()||"0"),i.push(t)}return new RegExp(i.join("_"))},d=function e(i,h=[],o=0){if(!i)return!1;for(let l=o;l<t(this,f,"f");l++){const f=(r=h,JSON.parse(JSON.stringify(r)));null!==t(this,n,"f")[l]&&(f[l]=t(this,n,"f")[l],f.length<=i&&t(this,s,"m",e).call(this,i,f,l+1),t(this,s,"m",w).call(this,t(this,s,"m",m).call(this,f),f))}var r;return!1},w=function(e,f){t(this,s,"m",c).call(this);for(let i of Object.keys(t(this,h,"f")).map(Number)){const s=t(this,h,"f")[i];e.test(s)&&s.split("_").map(Number).forEach(((e,i)=>{t(this,l,"f")[i].includes(e)||t(this,l,"f")[i].push(e)}))}for(let e in t(this,l,"f"))if(!(e in f))for(let s of i(t(this,o,"f")[e],t(this,l,"f")[e]))t(this,r,"f")[e].includes(s)||t(this,r,"f")[e].push(s)},class{constructor(i){s.add(this),this.options=i,f.set(this,0),h.set(this,{}),n.set(this,[]),o.set(this,[]),r.set(this,[]),l.set(this,[]),e(this,h,i.items,"f"),i.depth&&e(this,f,i.depth,"f"),t(this,s,"m",a).call(this)}set(e,i){t(this,n,"f")[e]=i,t(this,s,"m",u).call(this),t(this,s,"m",p).call(this)}unset(e){t(this,n,"f")[e]=null,t(this,s,"m",u).call(this),t(this,s,"m",p).call(this)}}}));
